import { useContext } from 'react';
import { DatosContext } from '../../../../../hooks/storeProvider';
import { motion } from 'framer-motion';
import { AiOutlineMinusCircle } from 'react-icons/ai';

//?????????????????????????????????????????????????????????????????
//?????????????????????????????????????????????????????????????????
//?????????????????????????????????????????????????????????????????

export const BtnRestar = ({ idCarpeta }) => {
	const { datos, setDatos } = useContext(DatosContext);

	const variants = {
		hidden: {},
		visible: {
			'align-self': 'flex-end',
			borderRadius: '15px',
			justifySelf: 'center',
			'margin-bottom': '3px',
			'margin-left': '-25px',
			placeItems: 'center',
			background: 'linear-gradient(-90deg, var(--color-4), var(--color-6))',
			color: 'var(--color-1)',
			height: '20px',
			padding: '2px',
			position: 'absolute',
			transform: 'scale(1)',
			transition: { duration: 0.1, ease: 'easeInOut' },
			width: '20px',

			display: 'grid'
		},
		tap: {
			background: 'linear-gradient(0deg, var(--color-4), var(--color-6))',
			transform: 'scale(0.9)',
			transition: { duration: 0.1 }
		}
	};

	function restandoCantidad() {
		const seleccionandoCarpeta = datos.carpetas[idCarpeta];

		const cambiandoCantidad = {
			...seleccionandoCarpeta,
			cantidad: seleccionandoCarpeta.cantidad !== 0 ? seleccionandoCarpeta.cantidad - 1 : 0
		};

		datos.carpetas.splice(idCarpeta, 1, cambiandoCantidad);

		setDatos({
			...datos,
			carpetas: datos.carpetas
		});
	}

	return (
		<motion.span variants={variants} initial="hidden" animate="visible" whileTap="tap">
			<AiOutlineMinusCircle
				onClick={() => {
					// envioDatosCantidad();
					restandoCantidad();
				}}
			/>
		</motion.span>
	);
};
