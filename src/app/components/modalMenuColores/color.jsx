import { useContext } from 'react';
import { DatosContext } from '../../../hooks/storeProvider';
import { motion } from 'framer-motion';

//?????????????????????????????????????????????????????????????????
//?????????????????????????????????????????????????????????????????
//?????????????????????????????????????????????????????????????????

export const Color = ({ color, nombreColor, colorBooleano, id }) => {
	const { datos, setDatos } = useContext(DatosContext);
	const carpetaSeleccionada = datos.carpetas[datos.idCarpetaSeleccionada]
	
	const variants = {
		hidden: {},
		visible: {
			borderRadius: '50px',
			listStyle: 'none',
			border:
				id === datos.carpetas[datos.idCarpetaSeleccionada]?.idColor
					? '2px solid #64FE2E'
					: '2px solid var(--color-2)',
			height: '35px',
			transform: datos.modalMenuColores ? 'scale(1)' : 'scale(0)',
			background: color,
			transition: datos.modalMenuColores ? { duration: .3, delay: id * .03, type: 'string'} : { duration: 0.3 },
			width: '35px'
		},
		tap: {
			transform: 'scale(0.9)',
			transition: { duration: 0.02, delay: 0 }
		}
	};

	function cambiandoColor() {

		const cambiandoColor = {
			...carpetaSeleccionada,
			colorCarpeta: color,
			idColor: id,
			nombreColor: nombreColor,
			colorBooleano: colorBooleano
		};

		datos.carpetas.splice(datos.idCarpetaSeleccionada, 1, cambiandoColor);

		setDatos({
			...datos,
			carpetas: datos.carpetas,
		});
	}

	return (
		<motion.li
			id={id}
			variants={variants}
			initial="hidden"
			animate="visible"
			whileTap="tap"
			style={{
				background: color
			}}
			onClick={() => {
				cambiandoColor();
			}}
		/>
	);
};
